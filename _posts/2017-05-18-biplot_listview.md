# Красивый график для главных компонент

Ура! У Ричарда Телфорда из Норвегии дошли руки до оживления [красивых графиков для главных компонент!](https://github.com/richardjtelford/ggbiplot/tree/experimental)


Если коротко. Ставим пакет:

```r
devtools::install_github("richardjtelford/ggbiplot", ref = "experimental")
```

Рисуем главные компоненты:

```r
library(ggbiplot)
data(wine)
cultivar <- wine.class
m <- prcomp(wine, scale = TRUE)
qplot(PC1, PC2, data = fortify(m), color = cultivar) + 
  stat_ellipse(aes(group = cultivar))
```

![](2017-05-18-biplot_listview_files/figure-html/unnamed-chunk-2-1.png)<!-- -->

И со стрелочками-проекциями исходных переменных

```r
df <- fortify(m, scale = 1, equalize = FALSE)
ggplot(df, aes(x = PC1, PC2)) + 
  geom_point(aes(color = cultivar)) +
  geom_axis(data = attr(df, "basis"), aes(label = .name))
```

![](2017-05-18-biplot_listview_files/figure-html/unnamed-chunk-3-1.png)<!-- -->


А ещё недавно попался под руку пакет для визуализации списков:

```r
library(listviewer)
model <- lm(data = cars, dist ~ speed)
jsonedit(model)
```

<!--html_preserve--><div id="htmlwidget-f8f6b7717552d4344d3c" style="width:672px;height:480px;" class="jsonedit html-widget"></div>
<script type="application/json" data-for="htmlwidget-f8f6b7717552d4344d3c">{"x":{"data":{"coefficients":{"(Intercept)":-17.5790948905109,"speed":3.93240875912408},"residuals":{"1":3.84945985401474,"2":11.8494598540146,"3":-5.94776642335769,"4":12.0522335766423,"5":2.11982481751823,"6":-7.81258394160586,"7":-3.74499270072994,"8":4.25500729927006,"9":12.2550072992701,"10":-8.67740145985403,"11":2.32259854014597,"12":-15.6098102189781,"13":-9.60981021897811,"14":-5.60981021897811,"15":-1.60981021897811,"16":-7.5422189781022,"17":0.457781021897801,"18":0.457781021897801,"19":12.4577810218978,"20":-11.4746277372263,"21":-1.47462773722628,"22":22.5253722627737,"23":42.5253722627737,"24":-21.4070364963504,"25":-15.4070364963504,"26":12.5929635036496,"27":-13.3394452554745,"28":-5.33944525547446,"29":-17.2718540145985,"30":-9.27185401459854,"31":0.728145985401458,"32":-11.2042627737226,"33":2.79573722627737,"34":22.7957372262774,"35":30.7957372262774,"36":-21.1366715328467,"37":-11.1366715328467,"38":10.8633284671533,"39":-29.0690802919708,"40":-13.0690802919708,"41":-9.0690802919708,"42":-5.0690802919708,"43":2.9309197080292,"44":-2.93389781021897,"45":-18.866306569343,"46":-6.79871532846714,"47":15.2012846715329,"48":16.2012846715329,"49":43.2012846715329,"50":4.26887591240878},"effects":{"(Intercept)":-303.914494553978,"speed":145.552255045757,"3":-8.11543950437914,"4":9.88456049562086,"5":0.194114676507393,"6":-9.49633114260608,"7":-5.18677696171955,"8":2.81322303828045,"9":10.8132230382805,"10":-9.87722278083301,"11":1.12277721916699,"12":-16.5676685999465,"13":-10.5676685999465,"14":-6.56766859994648,"15":-2.56766859994648,"16":-8.25811441905995,"17":-0.258114419059952,"18":-0.258114419059952,"19":11.74188558094,"20":-11.9485602381734,"21":-1.94856023817342,"22":22.0514397618266,"23":42.0514397618266,"24":-21.6390060572869,"25":-15.6390060572869,"26":12.3609939427131,"27":-13.3294518764004,"28":-5.32945187640036,"29":-17.0198976955138,"30":-9.01989769551383,"31":0.980102304486172,"32":-10.7103435146273,"33":3.2896564853727,"34":23.2896564853727,"35":31.2896564853727,"36":-20.4007893337408,"37":-10.4007893337408,"38":11.5992106662592,"39":-28.0912351528542,"40":-12.0912351528542,"41":-8.09123515285424,"42":-4.09123515285424,"43":3.90876484714576,"44":-1.47212679108117,"45":-17.1625726101946,"46":-4.85301842930811,"47":17.1469815706919,"48":18.1469815706919,"49":45.1469815706919,"50":6.45653575157843},"rank":2,"fitted.values":{"1":-1.84945985401474,"2":-1.84945985401462,"3":9.94776642335769,"4":9.94776642335769,"5":13.8801751824818,"6":17.8125839416059,"7":21.7449927007299,"8":21.7449927007299,"9":21.7449927007299,"10":25.677401459854,"11":25.677401459854,"12":29.6098102189781,"13":29.6098102189781,"14":29.6098102189781,"15":29.6098102189781,"16":33.5422189781022,"17":33.5422189781022,"18":33.5422189781022,"19":33.5422189781022,"20":37.4746277372263,"21":37.4746277372263,"22":37.4746277372263,"23":37.4746277372263,"24":41.4070364963504,"25":41.4070364963504,"26":41.4070364963504,"27":45.3394452554745,"28":45.3394452554745,"29":49.2718540145985,"30":49.2718540145985,"31":49.2718540145985,"32":53.2042627737226,"33":53.2042627737226,"34":53.2042627737226,"35":53.2042627737226,"36":57.1366715328467,"37":57.1366715328467,"38":57.1366715328467,"39":61.0690802919708,"40":61.0690802919708,"41":61.0690802919708,"42":61.0690802919708,"43":61.0690802919708,"44":68.933897810219,"45":72.8663065693431,"46":76.7987153284671,"47":76.7987153284671,"48":76.7987153284671,"49":76.7987153284672,"50":80.7311240875912},"assign":[0,1],"qr":{"qr":[[-7.07106781186548,-108.894444302728],[0.14142135623731,37.0135110466435],[0.14142135623731,0.188783697927562],[0.14142135623731,0.188783697927562],[0.14142135623731,0.161766536579647],[0.14142135623731,0.134749375231732],[0.14142135623731,0.107732213883817],[0.14142135623731,0.107732213883817],[0.14142135623731,0.107732213883817],[0.14142135623731,0.0807150525359022],[0.14142135623731,0.0807150525359022],[0.14142135623731,0.0536978911879873],[0.14142135623731,0.0536978911879873],[0.14142135623731,0.0536978911879873],[0.14142135623731,0.0536978911879873],[0.14142135623731,0.0266807298400723],[0.14142135623731,0.0266807298400723],[0.14142135623731,0.0266807298400723],[0.14142135623731,0.0266807298400723],[0.14142135623731,-0.000336431507842627],[0.14142135623731,-0.000336431507842627],[0.14142135623731,-0.000336431507842627],[0.14142135623731,-0.000336431507842627],[0.14142135623731,-0.0273535928557576],[0.14142135623731,-0.0273535928557576],[0.14142135623731,-0.0273535928557576],[0.14142135623731,-0.0543707542036725],[0.14142135623731,-0.0543707542036725],[0.14142135623731,-0.0813879155515875],[0.14142135623731,-0.0813879155515875],[0.14142135623731,-0.0813879155515875],[0.14142135623731,-0.108405076899502],[0.14142135623731,-0.108405076899502],[0.14142135623731,-0.108405076899502],[0.14142135623731,-0.108405076899502],[0.14142135623731,-0.135422238247417],[0.14142135623731,-0.135422238247417],[0.14142135623731,-0.135422238247417],[0.14142135623731,-0.162439399595332],[0.14142135623731,-0.162439399595332],[0.14142135623731,-0.162439399595332],[0.14142135623731,-0.162439399595332],[0.14142135623731,-0.162439399595332],[0.14142135623731,-0.216473722291162],[0.14142135623731,-0.243490883639077],[0.14142135623731,-0.270508044986992],[0.14142135623731,-0.270508044986992],[0.14142135623731,-0.270508044986992],[0.14142135623731,-0.270508044986992],[0.14142135623731,-0.297525206334907]],"qraux":[1.14142135623731,1.26983518197131],"pivot":[1,2],"tol":1e-07,"rank":2},"df.residual":48,"xlevels":{},"call":{},"terms":{},"model":{"dist":[2,10,4,22,16,10,18,26,34,17,28,14,20,24,28,26,34,34,46,26,36,60,80,20,26,54,32,40,32,40,50,42,56,76,84,36,46,68,32,48,52,56,64,66,54,70,92,93,120,85],"speed":[4,4,7,7,8,9,10,10,10,11,11,12,12,12,12,13,13,13,13,14,14,14,14,15,15,15,16,16,17,17,17,18,18,18,18,19,19,19,20,20,20,20,20,22,23,24,24,24,24,25]}},"options":{"mode":"tree","modes":["code","form","text","tree","view"]}},"evals":[],"jsHooks":[]}</script><!--/html_preserve-->

